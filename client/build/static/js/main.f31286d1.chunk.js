(this["webpackJsonpexploding-kitten-game"]=this["webpackJsonpexploding-kitten-game"]||[]).push([[0],{89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(0),c=n.n(s),r=n(10),i=n.n(r),o=n(135),l=n(134),d=n(17),j=n(20),u=n(61),b=n(62),p=n(14),h="SET_USER",x="SET_LEADERBOARD",O={username:"",savedGame:{cards:[],defusingCard:0},played:0,win:0,loose:0};var f=n(26),m={users:[],loading:!0};var v=Object(j.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case h:return Object(p.a)(Object(p.a)({},e),{},{username:a.username,savedGame:a.savedGame,played:a.played,win:a.win,loose:a.loose});default:return e}},leaderBoard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case x:return Object(p.a)(Object(p.a)({},e),{},{users:Object(f.a)(a.users),loading:!1});default:return e}}}),g=[b.a],y=Object(j.createStore)(v,{},Object(u.composeWithDevTools)(j.applyMiddleware.apply(void 0,g)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=n(16),C=n(137),S=n(128),k=n(138),B=n(124),T=n(139),G=n(127),E=n(94),I=Object(B.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,outline:"none",minWidth:"300px",padding:e.spacing(6)}}})),W=function(e){var t=e.open,n=e.handleClose,s=e.children,c=I();return Object(a.jsx)(T.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:c.modal,open:t,onClose:n,closeAfterTransition:!0,BackdropComponent:G.a,BackdropProps:{timeout:500},children:Object(a.jsx)(E.a,{in:t,children:Object(a.jsx)("div",{className:c.paper,children:s})})})},A=n(136),z=n(32),L=n.n(z),P=n(50),U=Object(d.b)(null,{getSetUser:function(e){return function(){var t=Object(P.a)(L.a.mark((function t(n){var a,s;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})});case 3:return a=t.sent,t.next=6,a.json();case 6:s=t.sent,n({type:h,payload:{username:e,savedGame:Object(p.a)({},s.user.savedGame),win:s.user.win,loose:s.user.loose,played:s.user.gamesPlayed}}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.getSetUser,n=Object(s.useState)(""),c=Object(w.a)(n,2),r=c[0],i=c[1];return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(r)},children:[Object(a.jsx)(S.a,{align:"center",children:"Enter A Username"}),Object(a.jsx)(C.a,{my:5,minWidth:"280px",children:Object(a.jsx)(A.a,{label:"Username",id:"standard-size-small",size:"small",value:r,fullWidth:!0,onChange:function(e){return i(e.target.value)},required:!0})}),Object(a.jsx)(C.a,{display:"flex",justifyContent:"center",children:Object(a.jsx)(k.a,{type:"submit",variant:"outlined",children:"Play"})})]})})),D=function(){var e=Object(s.useState)(!1),t=Object(w.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)(C.a,{bgcolor:"primary.main",height:"100vh",color:"white",flexWrap:"wrap",textAlign:"center",children:[Object(a.jsx)(C.a,{width:"100%",paddingY:{xs:3,md:8},children:Object(a.jsx)(S.a,{component:"h2",variant:"h3",children:"The Exploding Kitten Game"})}),Object(a.jsxs)(C.a,{width:"100%",mt:"14vh",children:[Object(a.jsx)(S.a,{component:"h2",variant:"h4",paragraph:!0,children:"Hey, Welcome"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(S.a,{component:"h3",variant:"h6",gutterBottom:!0,children:"Click here to start"}),Object(a.jsx)(k.a,{variant:"contained",size:"large",onClick:function(){return c(!0)},children:"Let's Start"})]}),Object(a.jsx)(W,{open:n,handleClose:function(){return c(!1)},children:Object(a.jsx)(U,{})})]})},N=n(132),H=n(133),J=n(131),M=n(129),R=function(e){var t=e.username;return Object(a.jsxs)(C.a,{boxShadow:"0 1px 5px 1px rgba(0,0,0,0.25)",mb:4,px:{xs:2,md:5},py:2,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#f0f0f0",children:[Object(a.jsx)(S.a,{component:"h1",variant:"h5",children:"The Exploding Kitten"}),Object(a.jsxs)(S.a,{component:"div",children:[Object(a.jsx)(C.a,{component:"span",px:"2px",children:Object(a.jsx)(M.a,{color:"secondary",fontSize:"small"})}),Object(a.jsx)("b",{children:t})]})]})},_=n(130),q=Object(d.b)((function(e){return{leaderBoard:e.leaderBoard}}),{getLeaderBoard:function(){return function(){var e=Object(P.a)(L.a.mark((function e(t){var n,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t({type:x,payload:{users:a.users}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.leaderBoard,n=e.getLeaderBoard,c=Object(s.useState)([]),r=Object(w.a)(c,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){t.loading?n():o(Object(f.a)(t.users))}),[t,n]),Object(a.jsxs)(C.a,{position:"relative",boxShadow:"0 0px 4px 0 rgba(0,0,0,0.12)",minHeight:"60%",pt:2,children:[Object(a.jsx)(S.a,{align:"center",paragraph:!0,children:Object(a.jsx)("b",{children:"LeaderBoard"})}),Object(a.jsx)(C.a,{position:"absolute",right:0,top:16,cursor:"pointer",children:Object(a.jsx)(k.a,{variant:"text",onClick:n,children:Object(a.jsx)(_.a,{fontSize:"small"})})}),Object(a.jsxs)(C.a,{display:"grid",gridGap:5,mt:3,children:[Object(a.jsxs)(C.a,{mb:2,children:[Object(a.jsxs)(C.a,{px:2,py:1,display:"flex",justifyContent:"space-between",children:[Object(a.jsx)(S.a,{children:"Username"}),Object(a.jsx)(S.a,{children:"Points"})]}),Object(a.jsx)(J.a,{})]}),i.map((function(e){return Object(a.jsx)(C.a,{boxShadow:"0 1px 3px 0 rgba(0,0,0,0.1)",border:"0.5px solid #eee",children:Object(a.jsxs)(C.a,{px:2,py:1,display:"flex",justifyContent:"space-between",style:{textTransform:"uppercase"},children:[Object(a.jsx)(S.a,{children:e.username}),Object(a.jsx)(S.a,{children:e.win})]})},e._id)}))]})]})})),K=function(e){var t=e.id,n=e.card;return Object(a.jsx)("div",{class:"card-scene",children:Object(a.jsxs)("div",{id:t,class:"card",children:[Object(a.jsxs)("div",{class:"card-face card-backing",children:[Object(a.jsx)("div",{class:"grain-overlay"}),Object(a.jsx)("div",{class:"top-banner",children:"Click to Flip"}),Object(a.jsx)("div",{class:"back-main",children:Object(a.jsxs)("div",{class:"pipboy",children:[Object(a.jsx)("div",{class:"twelve-point-star"}),Object(a.jsx)("img",{src:"/images/cat_cover.png",alt:"card cover"})]})})]}),Object(a.jsxs)("div",{class:"card-face card-front",children:[Object(a.jsx)("h1",{children:n}),Object(a.jsx)("div",{class:"main-pane",children:Object(a.jsx)("img",{class:"slugger",src:"/images/".concat(n,".png"),alt:"card front"})})]})]})})},Y=(n(89),Object(B.a)((function(){return{root:{cursor:"pointer",position:"absolute",top:0,left:0},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14}}}))),F=Object(d.b)((function(e){return{game:e.game}}),{syncGameToDB:function(e,t,n,a){return function(){var s=Object(P.a)(L.a.mark((function s(c){return L.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,fetch("/api/user/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({game:t,cards:n,defusingCard:a})});case 3:s.next=8;break;case 5:s.prev=5,s.t0=s.catch(0),console.log(s.t0);case 8:case"end":return s.stop()}}),s,null,[[0,5]])})));return function(e){return s.apply(this,arguments)}}()}})((function(e){var t=e.game,n=e.syncGameToDB,c=Y(),r=Object(s.useState)([]),i=Object(w.a)(r,2),o=i[0],l=i[1],d=Object(s.useState)(0),j=Object(w.a)(d,2),u=j[0],b=j[1],h=Object(s.useState)({played:0,win:0,loose:0,status:"loading"}),x=Object(w.a)(h,2),O=x[0],m=x[1],v=O.played,g=O.win,y=O.loose,B=O.status,T=function(e){var t,n,a=[],s=0;if((null===e||void 0===e?void 0:e.savedGame)&&(null===e||void 0===e||null===(t=e.savedGame)||void 0===t||null===(n=t.cards)||void 0===n?void 0:n.length)>0)a=Object(f.a)(null===e||void 0===e?void 0:e.savedGame.cards),s=null===e||void 0===e?void 0:e.savedGame.defusingCard;else{for(var c=["cat","bomb","defusing","shuffle"],r=0;r<5;r++){var i=Math.round(3*Math.random());a.push(c[i])}m((function(e){return Object(p.a)(Object(p.a)({},e),{},{status:"running"})}))}m((function(t){return Object(p.a)(Object(p.a)({},t),{},{played:(null===e||void 0===e?void 0:e.played)||(null===t||void 0===t?void 0:t.played),win:(null===e||void 0===e?void 0:e.win)||(null===t||void 0===t?void 0:t.win),loose:(null===e||void 0===e?void 0:e.loose)||(null===t||void 0===t?void 0:t.loose),status:"running"})})),l(Object(f.a)(a)),b(s)};Object(s.useEffect)((function(){(null===t||void 0===t?void 0:t.username)&&T(t)}),[t]);var G=function(){var e=o,t=e.pop(),n={defusingCard:u,played:v,win:g,loose:y,status:B};"shuffle"===t?(n.status="restarting",n.defusingCard=0,setTimeout((function(){T()}),1e3)):"defusing"===t?n.defusingCard++:"bomb"===t&&(u>0?(n.defusingCard--,t="defusing"):(n.played++,n.loose++,n.status="loose",n.defusingCard=0)),0===e.length&&"bomb"!==t&&(n.defusingCard=0,n.played++,n.win++,n.status="win"),E(e,n.defusingCard,n.played,n.win,n.loose,n.status)},E=function(e,a,s,c,r,i){l(Object(f.a)(e)),b(a),m((function(e){return Object(p.a)(Object(p.a)({},e),{},{played:s,win:c,loose:r,status:i})})),n(null===t||void 0===t?void 0:t.username,{played:s,win:c,loose:r},"running"===i?e:[],a)};return Object(a.jsxs)(C.a,{position:"relative",children:[Object(a.jsx)(R,{username:t.username}),Object(a.jsx)(N.a,{maxWidth:!1,children:Object(a.jsxs)(H.a,{container:!0,spacing:3,children:[Object(a.jsx)(H.a,{item:!0,xs:12,md:8,children:Object(a.jsx)(C.a,{position:"relative",width:"100%",minHeight:"70vh",boxShadow:"0 0px 4px 0 rgba(0,0,0,0.12)",display:"flex",justifyContent:"center",alignItems:"center",children:Object(a.jsxs)(C.a,{display:"flex",justifyContent:"center",alignItems:"center",children:["running"===O.status&&Object(a.jsx)(C.a,{position:"relative",width:285,height:290,children:o.map((function(e,t){return Object(a.jsx)(C.a,{className:c.root,zIndex:t,onClick:function(){return function(e){var t=document.querySelector("#".concat(e));console.log(t),t.classList.add("card--flipped"),setTimeout((function(){G()}),800)}(e+t)},children:Object(a.jsx)(K,{id:e+t,card:e})},t+e)}))}),Object(a.jsx)(C.a,{position:"absolute",top:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",py:1,color:"#fff",bgcolor:"#4d76a8",children:"loose"===O.status||"win"===O.status?Object(a.jsxs)(S.a,{children:["You ","win"===B?"won":"lost"]}):Object(a.jsxs)(S.a,{children:[o.length," cards left"]})}),"restarting"===O.status&&Object(a.jsx)(S.a,{children:"Shuffling ..."}),("loose"===O.status||"win"===O.status)&&Object(a.jsx)(C.a,{children:Object(a.jsx)(k.a,{onClick:function(){return T()},variant:"contained",children:"Click Here to play Again"})})]})})}),Object(a.jsxs)(H.a,{item:!0,xs:12,md:4,children:[Object(a.jsxs)(C.a,{boxShadow:"0 0px 4px 0 rgba(0,0,0,0.12)",mb:4,pt:2,children:[Object(a.jsx)(S.a,{paragraph:!0,align:"center",children:Object(a.jsx)("b",{children:"Game Stats"})}),Object(a.jsxs)(C.a,{children:[Object(a.jsxs)(C.a,{px:4,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(a.jsx)(S.a,{children:"Played : "}),Object(a.jsx)(S.a,{children:O.played})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(C.a,{px:4,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(a.jsx)(S.a,{children:"Win : "}),Object(a.jsx)(S.a,{children:O.win})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(C.a,{px:4,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(a.jsx)(S.a,{children:"Loose : "}),Object(a.jsx)(S.a,{children:O.loose})]})]})]}),Object(a.jsx)(q,{})]})]})})]})})),$=(n(90),Object(d.b)((function(e){return{game:e.game}}))((function(e){var t=e.game,n=Object(s.useState)(""),c=Object(w.a)(n,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){i(null===t||void 0===t?void 0:t.username)}),[t]),Object(a.jsx)(C.a,{children:r?Object(a.jsx)(F,{}):Object(a.jsx)(D,{})})}))),Q=n(49),V=n(66),X=Object(V.a)({palette:{primary:{main:"#94A187"},secondary:{main:"#01844d"},action:{main:"#01844d"},error:{main:Q.a.A400},background:{default:"#fff"}}});n(91);i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(d.a,{store:y,children:Object(a.jsxs)(l.a,{theme:X,children:[Object(a.jsx)(o.a,{}),Object(a.jsx)($,{})," "]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[92,1,2]]]);
//# sourceMappingURL=main.f31286d1.chunk.js.map